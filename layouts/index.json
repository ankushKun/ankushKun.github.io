{{- $results := slice -}}


{{/* 2. Content Pages (Blogs, Projects) */}}
{{- range .Site.RegularPages -}}
    {{- $title := .Title -}}
    {{- $type := .Section -}}
    {{- if eq $type "" }}{{ $type = "page" }}{{ end -}}
    {{- $content := .Plain | truncate 300 -}}
    
    {{/* Exclude sections that are handled by apps if needed, but keeping them allows content search */}}
    {{- if not (or (eq $title "Wins") (eq $title "Contact") (eq $title "Schedule Call")) -}}
        {{- $item := dict 
            "title" $title 
            "type" $type 
            "permalink" .RelPermalink 
            "content" $content
        -}}
        {{- $results = $results | append $item -}}
    {{- end -}}
{{- end -}}

{{- $results | jsonify -}}
